(this["webpackJsonpEcom-dashboard"]=this["webpackJsonpEcom-dashboard"]||[]).push([[125],{2004:function(e,t,a){"use strict";a.r(t);var c=a(16),s=a(0),n=a(508),i=a(464),l=a(479),r=a(83),d=a.n(r),o=a(501),j=a(1),b=a(467),u=a(468),m=a(469),O=a(470),h=a(475),p=a(964),x=a(965),v=a(781),f=a(940),N=a(966),g=a(462),y=a(482),C=a(937),S=a(484),w=a.n(S),_=a(556),I=a(583),k=a(1042),R=a(968),P=a(516),q=a(497),z=(a(584),a(481),a(522),a(517)),A=a(6),J=function(e){var t=e.data,a=e.products,n=Object(s.useState)(t.history.length),r=Object(c.a)(n,2),S=r[0],J=r[1],D=Object(q.c)(),E=D.register,L=(D.errors,D.handleSubmit),B=Object(s.useState)(!1),T=Object(c.a)(B,2),V=T[0],F=T[1],M=Object(s.useState)(t.total),Q=Object(c.a)(M,2),U=Q[0],G=(Q[1],Object(s.useState)(t.idsProducts[0]?t.idsProducts[0].price:0)),H=Object(c.a)(G,2),K=(H[0],H[1],Object(s.useState)(t.history[0].qte?t.history[0].qte:0)),W=Object(c.a)(K,2),X=(W[0],W[1],Object(s.useState)(t.status)),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=Object(s.useState)(t.history),te=Object(c.a)(ee,2),ae=te[0],ce=te[1],se=Object(s.useState)(new Date(t.createdAt)),ne=Object(c.a)(se,2),ie=ne[0],le=ne[1],re=Object(s.useState)(new Date(t.createdAt)),de=Object(c.a)(re,2);de[0],de[1];Object(s.useEffect)((function(){}));var oe=function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}};return Object(A.jsxs)("div",{className:"invoice-edit-wrapper",children:[V?Object(A.jsxs)(o.a,{color:"success",children:[Object(A.jsx)("h4",{className:"alert-heading",children:"Succ\xe8s"}),Object(A.jsx)("div",{className:"alert-body",children:"Mises \xe0 jour effectu\xe9es avec succ\xe8s"})]}):"",Object(A.jsxs)(b.a,{className:"invoice-edit",children:[Object(A.jsx)(u.a,{xl:9,md:8,sm:12,children:Object(A.jsxs)(m.a,{className:"invoice-preview-card mb-0",children:[Object(A.jsx)(O.a,{className:"invoice-padding pb-0",children:Object(A.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(A.jsx)("div",{children:Object(A.jsxs)(u.a,{className:"p-0",lg:"20",children:[Object(A.jsx)("h6",{className:"mb-2",children:"Commande de:"}),Object(A.jsx)("h6",{className:"mb-25",children:t.clientId.fullname}),Object(A.jsx)(h.a,{className:"mb-25",children:t.clientId.phone}),Object(A.jsx)(h.a,{className:"mb-25",children:t.clientId.city}),Object(A.jsx)(h.a,{className:"mb-25",children:t.clientId.adr})]})}),Object(A.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(A.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(A.jsx)("h4",{className:"invoice-title",children:"Invoice"}),Object(A.jsxs)(p.a,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(A.jsx)(x.a,{addonType:"prepend",children:Object(A.jsx)(v.a,{children:Object(A.jsx)(k.a,{size:15})})}),Object(A.jsx)(f.a,{children:Object(A.jsx)(N.a,{className:"invoice-edit-input",value:t._id,placeholder:"53634",disabled:!0,name:"id",innerRef:E({required:!0,validate:function(e){return""!==e}})})})]})]}),Object(A.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(A.jsx)("span",{className:"title",children:"Date:"}),Object(A.jsx)(w.a,{value:ie,disabled:!0,name:"date",onChange:function(e){return le(e)},className:"form-control invoice-edit-input date-picker",innerRef:E({required:!0,validate:function(e){return""!==e}})})]})]})]})}),Object(A.jsx)("hr",{className:"invoice-spacing"}),Object(A.jsxs)(O.a,{className:"invoice-padding invoice-product-details",children:[Object(A.jsx)(_.a,{count:S,children:function(e){var s=0===e?"div":I.SlideDown;return Object(A.jsx)(s,{className:"repeater-wrapper",children:Object(A.jsx)(b.a,{children:Object(A.jsx)(u.a,{className:"d-flex product-details-border position-relative pr-0",sm:"12",children:Object(A.jsxs)(b.a,{className:"w-100 pr-lg-0 pr-1 py-2",children:[Object(A.jsxs)(u.a,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2",lg:"5",sm:"12",children:[Object(A.jsx)(h.a,{className:"col-title mb-md-50 mb-0",children:"Produit"}),Object(A.jsx)(f.a,{children:Object(A.jsx)(P.a,{theme:l.i,className:"react-select",classNamePrefix:"select",defaultValue:t.idsProducts[e]?t.idsProducts[e]:t.idsProducts[0],options:a,isClearable:!1,name:"prd-".concat(e),innerRef:E({required:!0,validate:function(e){return""!==e}}),onChange:function(t){var a=ae.slice();Object.entries(ae).map((function(s){var n=Object(c.a)(s,2),i=n[0],l=n[1];parseInt(i)===parseInt(e)&&(a[i]=Object(j.a)(Object(j.a)({},l),{},{idProd:t._id,price:t.price,name:t.label}))})),ce(a)}})})]}),Object(A.jsxs)(u.a,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(A.jsx)(h.a,{className:"col-title mb-md-2 mb-0",children:"Qte"}),Object(A.jsx)(z.a,{id:"min-max-number-input",size:"sm",min:1,max:1e8,value:ae[e]?ae[e].qte:1,onChange:function(t){var a=ae.slice();Object.entries(ae).map((function(s){var n=Object(c.a)(s,2),i=n[0],l=n[1];parseInt(i)===parseInt(e)&&(a[i]=Object(j.a)(Object(j.a)({},l),{},{qte:parseInt(t)}))}));ce(a)}})]}),Object(A.jsxs)(u.a,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(A.jsxs)(h.a,{className:"col-title mb-md-50 mb-0",children:["Prix (",t.currency,")"]}),Object(A.jsx)(N.a,{type:"number",value:ae[e]?ae[e].price:0,placeholder:"0",name:"price-".concat(e),innerRef:E({required:!1,validate:function(e){return""!==e}}),disabled:!0})]}),Object(A.jsxs)(u.a,{className:"my-lg-0 my-2",lg:"3",sm:"12",children:[Object(A.jsx)(h.a,{className:"col-title mb-md-2 mb-0",children:"Total  "}),Object(A.jsx)(N.a,{type:"number",value:ae[e]?ae[e].qte*ae[e].price:0,disabled:!0,placeholder:"24"})]})]})})})},e)}}),Object(A.jsx)(b.a,{className:"mt-1",children:Object(A.jsx)(u.a,{sm:"12",className:"px-0",children:Object(A.jsxs)(g.a.Ripple,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){J(S+1),delete t.history[0]._id,ae.push(t.history[0]),ae.total=ae.total+ae[0].qte*ae[0].price},children:[Object(A.jsx)(R.a,{size:14,className:"mr-25"}),Object(A.jsx)("span",{className:"align-middle",children:"ajouter un item"})]})})})]}),Object(A.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(A.jsx)(O.a,{className:"invoice-padding py-0",children:Object(A.jsx)(b.a,{children:Object(A.jsx)(u.a,{children:Object(A.jsxs)(f.a,{className:"mb-2",children:[Object(A.jsx)(y.a,{for:"note",className:"form-label font-weight-bold",children:"Note:"}),Object(A.jsx)(N.a,{type:"textarea",rows:"2",id:"note",defaultValue:t.note})]})})})})]})}),Object(A.jsx)(u.a,{xl:3,md:4,sm:12,children:Object(A.jsxs)(s.Fragment,{children:[Object(A.jsx)(m.a,{className:"invoice-action-wrapper",children:Object(A.jsxs)(O.a,{children:[Object(A.jsx)(g.a.Ripple,{tag:i.b,to:"/orders/list",color:"primary",block:!0,className:"mb-75",children:"Retour \xe0 la liste"}),Object(A.jsx)(g.a.Ripple,{color:"success",block:!0,className:"mb-75",type:"submit",onClick:L((function(){var e=[],a=0;ae.map((function(t){e.push(t.idProd),a+=t.qte*t.price}));var c={clientId:t.clientId._id,idUser:oe(JSON.parse(Object(l.c)())).id,idsProducts:e,total:a,status:Z,history:ae};console.log(U);var s="http://68.183.222.133:5000/orders/update/".concat(t._id);d.a.patch(s,c,{headers:{Authorization:JSON.parse(Object(l.c)())}}).then((function(e){console.log("-----"),console.log(e.data),F(!0)})).catch((function(e){return console.log(e)}))})),children:"Sauvegarder"})]})}),Object(A.jsx)(m.a,{className:"invoice-action-wrapper",children:Object(A.jsxs)(O.a,{children:[Object(A.jsx)("h6",{className:"mb-2",children:"Status"}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status1",name:"status",label:"Confirm\xe9e",className:"custom-control-success",value:"Confirm\xe9e",defaultChecked:"Confirm\xe9e"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status2",name:"status",label:"Sans r\xe9ponse",className:"custom-control-danger",value:"SansR\xe9ponse",defaultChecked:"Sans r\xe9ponse"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status3",name:"status",label:"Report\xe9e",className:"custom-control-primary",value:"Report\xe9e",defaultChecked:"Report\xe9e"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status7",name:"status",label:"Injoignable",className:"custom-control-secondary",value:"Injoignable",defaultChecked:"Injoignable"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status4",name:"status",label:"Refus\xe9e",className:"custom-control-warning",value:"Refus\xe9e",defaultChecked:"Refus\xe9e"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status5",name:"status",label:"Annul\xe9e",className:"custom-control-danger",value:"Annul\xe9e",defaultChecked:"Annul\xe9e"===t.status,onChange:function(e){return $(e.target.value)}})}),Object(A.jsx)("div",{children:Object(A.jsx)(C.a,{type:"radio",id:"status6",name:"status",label:"Livr\xe9e",className:"custom-control-success",value:"Livr\xe9e",defaultChecked:"Livr\xe9e"===t.status,onChange:function(e){return $(e.target.value)}})})]})})]})})]})]})};a(921),a(922),t.default=function(){var e=Object(n.i)().id,t=Object(s.useState)(null),a=Object(c.a)(t,2),r=a[0],j=a[1],b=Object(s.useState)(null),u=Object(c.a)(b,2),m=u[0],O=u[1],h=Object(s.useState)(!1),p=Object(c.a)(h,2),x=(p[0],p[1],Object(s.useState)(!1)),v=Object(c.a)(x,2);v[0],v[1];return Object(s.useEffect)((function(){d.a.get("http://68.183.222.133:5000/products/",{headers:{Authorization:JSON.parse(Object(l.c)())}}).then((function(e){console.log("____prds___"),console.log(e.data),O(e.data)})),d.a.get("http://68.183.222.133:5000/orders/".concat(e),{headers:{Authorization:JSON.parse(Object(l.c)())}}).then((function(e){console.log("____order___"),console.log(e.data),j(e.data)}))}),[]),null!==r&&void 0!==r?Object(A.jsx)(J,{data:r,products:m}):Object(A.jsxs)(o.a,{color:"danger",children:[Object(A.jsx)("h4",{className:"alert-heading",children:"Invoice not found"}),Object(A.jsxs)("div",{className:"alert-body",children:["Invoice with id: ",e," doesn't exist. Check list of all invoices: ",Object(A.jsx)(i.b,{to:"/invoice/list",children:"Invoice List"})]})]})}},481:function(e,t,a){},510:function(e,t,a){"use strict";var c=a(1),s=a(32),n=a(122),i=a(939),l=a(58),r=a.n(l),d=a(514),o=a(531),j=a(509),b=a(6),u=["width","open","toggleSidebar","size","bodyClassName","contentClassName","wrapperClassName","headerClassName","className","title","children","closeBtn"];t.a=function(e){var t,a=e.width,l=e.open,m=e.toggleSidebar,O=e.size,h=e.bodyClassName,p=e.contentClassName,x=e.wrapperClassName,v=e.headerClassName,f=e.className,N=e.title,g=e.children,y=e.closeBtn,C=Object(n.a)(e,u),S=y||Object(b.jsx)(i.a,{className:"cursor-pointer",size:15,onClick:m});return Object(b.jsxs)(d.a,Object(c.a)(Object(c.a)(Object(c.a)({isOpen:l,toggle:m,contentClassName:r()(Object(s.a)({},p,p)),modalClassName:r()("modal-slide-in",Object(s.a)({},x,x)),className:r()((t={},Object(s.a)(t,f,f),Object(s.a)(t,"sidebar-lg","lg"===O),Object(s.a)(t,"sidebar-sm","sm"===O),t))},void 0!==a?{style:{width:String(a)+"px"}}:{}),C),{},{children:[Object(b.jsx)(o.a,{className:r()(Object(s.a)({},v,v)),toggle:m,close:S,tag:"div",children:Object(b.jsx)("h5",{className:"modal-title",children:Object(b.jsx)("span",{className:"align-middle",children:N})})}),Object(b.jsx)(j.a,{className:r()("flex-grow-1",Object(s.a)({},h,h)),children:g})]}))}},522:function(e,t,a){},556:function(e,t,a){"use strict";var c=a(1),s=a(122),n=a(6),i=["count","tag","component","children"],l=function(e){for(var t=e.count,a=e.tag,l=(e.component,e.children),r=Object(s.a)(e,i),d=a,o=[],j=0;j<t;j++)o.push(l(j));return Object(n.jsx)(d,Object(c.a)(Object(c.a)({},r),{},{children:o}))};l.defaultProps={tag:"div"},t.a=l},921:function(e,t,a){"use strict";a(510),a(1053),a(489),a(940),a(482),a(966),a(971),a(462),a(6)},922:function(e,t,a){"use strict";a(16),a(0),a(484),a(489),a(940),a(966),a(482),a(462),a(510),a(481),a(522),a(6)}}]);
//# sourceMappingURL=125.0441ea63.chunk.js.map