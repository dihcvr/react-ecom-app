(this["webpackJsonpEcom-dashboard"]=this["webpackJsonpEcom-dashboard"]||[]).push([[126],{2005:function(e,t,a){"use strict";a.r(t);var c=a(16),s=a(0),n=a(508),l=a(464),i=a(479),r=a(83),o=a.n(r),d=a(501),j=a(1),b=a(517),u=a(467),m=a(468),O=a(469),h=a(470),p=a(940),x=a(964),g=a(965),f=a(781),v=a(966),N=a(475),y=a(462),C=a(482),S=a(937),w=a(484),_=a.n(w),I=a(556),k=a(583),R=a(1108),z=a(1091),A=a(984),q=a(1042),J=a(968),P=a(516),T=a(497),D=(a(584),a(481),a(522),a(6)),E=function(e){var t=e.data,a=Object(s.useState)(1),n=Object(c.a)(a,2),r=n[0],w=n[1],E=Object(T.c)(),L=E.register,V=(E.errors,E.handleSubmit),B=Object(s.useState)(!1),F=Object(c.a)(B,2),M=F[0],Q=F[1],U=Object(s.useState)(t._id),G=Object(c.a)(U,2),H=G[0],K=(G[1],Object(s.useState)(0)),W=Object(c.a)(K,2),X=(W[0],W[1],Object(s.useState)(0)),Y=Object(c.a)(X,2),Z=(Y[0],Y[1],Object(s.useState)(0)),$=Object(c.a)(Z,2),ee=($[0],$[1],Object(s.useState)("")),te=Object(c.a)(ee,2),ae=te[0],ce=te[1],se=Object(s.useState)([]),ne=Object(c.a)(se,2),le=ne[0],ie=ne[1],re=Object(s.useState)([{}]),oe=Object(c.a)(re,2),de=oe[0],je=oe[1],be=Object(s.useState)("Injoignable"),ue=Object(c.a)(be,2),me=ue[0],Oe=ue[1],he=Object(s.useState)(new Date(t.createdAt)),pe=Object(c.a)(he,2),xe=pe[0],ge=pe[1],fe=Object(s.useState)(new Date(t.createdAt)),ve=Object(c.a)(fe,2),Ne=(ve[0],ve[1],Object(s.useState)()),ye=Object(c.a)(Ne,2),Ce=ye[0],Se=ye[1],we=function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}};Object(s.useEffect)((function(){var e={fullname:t.fullname,phone:t.phone,adr:t.adr,city:t.city};Se(e),console.log(e),console.log("products"),o.a.get("http://68.183.222.133:5000/products/",{headers:{Authorization:JSON.parse(Object(i.c)())}}).then((function(e){console.log("____prds___"),console.log(e.data),ie(e.data)}))}),[]);var _e=function(e){Object.keys(Ce).forEach((function(t){(t=e.target.name)&&(Ce[t]=e.target.value)})),console.log(Ce)};return Object(D.jsxs)("div",{className:"invoice-edit-wrapper",children:[M?Object(D.jsxs)(d.a,{color:"success",children:[Object(D.jsx)("h4",{className:"alert-heading",children:"Succ\xe8s"}),Object(D.jsx)("div",{className:"alert-body",children:"La commande effectu\xe9e avec succ\xe8s"})]}):"",Object(D.jsxs)(u.a,{className:"invoice-edit",children:[Object(D.jsx)(m.a,{xl:9,md:8,sm:12,children:Object(D.jsxs)(O.a,{className:"invoice-preview-card mb-0",children:[Object(D.jsx)(h.a,{className:"invoice-padding pb-0",children:Object(D.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(D.jsx)("div",{children:Object(D.jsxs)(m.a,{className:"p-0",lg:"20",children:[Object(D.jsx)("h6",{className:"mb-2",children:"Commande de:"}),Object(D.jsx)(p.a,{row:!0,children:Object(D.jsx)(m.a,{sm:"12",children:Object(D.jsxs)(x.a,{className:"input-group-merge",children:[Object(D.jsx)(g.a,{addonType:"prepend",children:Object(D.jsx)(f.a,{children:Object(D.jsx)(R.a,{size:15})})}),Object(D.jsx)(v.a,{type:"text",name:"fullname",id:"nameIcons",placeholder:"Nom Complet",defaultValue:t.fullname,innerRef:L({required:!0,validate:function(e){return""!==e}}),onChange:function(e){_e(e)}})]})})}),Object(D.jsx)(p.a,{row:!0,children:Object(D.jsx)(m.a,{sm:"12",children:Object(D.jsxs)(x.a,{className:"input-group-merge",children:[Object(D.jsx)(g.a,{addonType:"prepend",children:Object(D.jsx)(f.a,{children:Object(D.jsx)(z.a,{size:15})})}),Object(D.jsx)(v.a,{type:"number",name:"phone",id:"mobileIcons",placeholder:"Telephone",defaultValue:t.phone,innerRef:L({required:!0,validate:function(e){return""!==e}}),onChange:function(e){_e(e)}})]})})}),Object(D.jsx)(p.a,{row:!0,children:Object(D.jsx)(m.a,{sm:"12",children:Object(D.jsxs)(x.a,{className:"input-group-merge",children:[Object(D.jsx)(g.a,{addonType:"prepend",children:Object(D.jsx)(f.a,{children:Object(D.jsx)(A.a,{size:15})})}),Object(D.jsx)(v.a,{type:"text",name:"adr",id:"adrIcons",placeholder:"adresse",defaultValue:t.adr,innerRef:L({required:!0,validate:function(e){return""!==e}}),onChange:function(e){_e(e)}})]})})}),Object(D.jsx)(p.a,{row:!0,children:Object(D.jsx)(m.a,{sm:"12",children:Object(D.jsxs)(x.a,{className:"input-group-merge",children:[Object(D.jsx)(g.a,{addonType:"prepend",children:Object(D.jsx)(f.a,{children:Object(D.jsx)(A.a,{size:15})})}),Object(D.jsx)(v.a,{type:"text",name:"city",id:"cityIcons",placeholder:"ville",defaultValue:t.city,innerRef:L({required:!0,validate:function(e){return""!==e}}),onChange:function(e){_e(e)}})]})})})]})}),Object(D.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(D.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(D.jsx)("h4",{className:"invoice-title",children:"Invoice"}),Object(D.jsxs)(x.a,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(D.jsx)(g.a,{addonType:"prepend",children:Object(D.jsx)(f.a,{children:Object(D.jsx)(q.a,{size:15})})}),Object(D.jsx)(v.a,{className:"invoice-edit-input",value:t._id,placeholder:"53634",disabled:!0,name:"id"})]})]}),Object(D.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(D.jsx)("span",{className:"title",children:"Date:"}),Object(D.jsx)(_.a,{value:xe,disabled:!0,name:"date",onChange:function(e){return ge(e)},className:"form-control invoice-edit-input date-picker",innerRef:L({required:!0,validate:function(e){return""!==e}})})]})]})]})}),Object(D.jsx)("hr",{className:"invoice-spacing"}),Object(D.jsxs)(h.a,{className:"invoice-padding invoice-product-details",children:[Object(D.jsx)(I.a,{count:r,children:function(e){var t=0===e?"div":k.SlideDown;return Object(D.jsx)(t,{className:"repeater-wrapper",children:Object(D.jsx)(u.a,{children:Object(D.jsx)(m.a,{className:"d-flex product-details-border position-relative pr-0",sm:"12",children:Object(D.jsxs)(u.a,{className:"w-100 pr-lg-0 pr-1 py-2",children:[Object(D.jsxs)(m.a,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2",lg:"5",sm:"12",children:[Object(D.jsx)(N.a,{className:"col-title mb-md-50 mb-0",children:"Produit"}),Object(D.jsx)(P.a,{theme:i.i,className:"react-select",classNamePrefix:"select",options:le,isClearable:!1,onChange:function(t){var a=de.slice();Object.entries(de).map((function(s){var n=Object(c.a)(s,2),l=n[0],i=n[1];parseInt(l)===parseInt(e)&&(a[l]=Object(j.a)(Object(j.a)({},i),{},{idProd:t._id,price:t.price,name:t.label}))})),je(a)}})]}),Object(D.jsxs)(m.a,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(D.jsx)(N.a,{className:"col-title mb-md-2 mb-0",children:"Qte"}),Object(D.jsx)(b.a,{id:"min-max-number-input",size:"sm",min:0,max:1e8,value:0,onChange:function(t){var a=de.slice();Object.entries(de).map((function(s){var n=Object(c.a)(s,2),l=n[0],i=n[1];parseInt(l)===parseInt(e)&&(a[l]=Object(j.a)(Object(j.a)({},i),{},{qte:parseInt(t)}))})),je(a)}})]}),Object(D.jsxs)(m.a,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(D.jsx)(N.a,{className:"col-title mb-md-50 mb-0",children:"Prix (MAD)"}),Object(D.jsx)(v.a,{type:"number",value:de[e]?de[e].price:0,placeholder:"0",name:"price-".concat(e),innerRef:L({required:!1,validate:function(e){return""!==e}}),disabled:!0})]}),Object(D.jsxs)(m.a,{className:"my-lg-0 my-2",lg:"3",sm:"12",children:[Object(D.jsx)(N.a,{className:"col-title mb-md-2 mb-0",children:"Total"}),Object(D.jsx)(v.a,{type:"number",placeholder:"0",value:de[e]?de[e].qte*de[e].price:0})]})]})})})},e)}}),Object(D.jsx)(u.a,{className:"mt-1",children:Object(D.jsx)(m.a,{sm:"12",className:"px-0",children:Object(D.jsxs)(y.a.Ripple,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){w(r+1),de.push({})},children:[Object(D.jsx)(J.a,{size:14,className:"mr-25"}),Object(D.jsx)("span",{className:"align-middle",children:"ajouter un item"})]})})})]}),Object(D.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(D.jsx)(h.a,{className:"invoice-padding py-0",children:Object(D.jsx)(u.a,{children:Object(D.jsx)(m.a,{children:Object(D.jsxs)(p.a,{className:"mb-2",children:[Object(D.jsx)(C.a,{for:"note",className:"form-label font-weight-bold",children:"Note:"}),Object(D.jsx)(v.a,{type:"textarea",rows:"2",id:"note",defaultValue:t.note,onChange:function(e){return ce(e.target.value)}})]})})})})]})}),Object(D.jsx)(m.a,{xl:3,md:4,sm:12,children:Object(D.jsxs)(s.Fragment,{children:[Object(D.jsx)(O.a,{className:"invoice-action-wrapper",children:Object(D.jsxs)(h.a,{children:[Object(D.jsx)(y.a.Ripple,{tag:l.b,to:"/orders/list",color:"primary",block:!0,className:"mb-75",children:"Retour \xe0 la liste"}),M?"":Object(D.jsx)(y.a.Ripple,{color:"success",block:!0,className:"mb-75",onClick:V((function(){o.a.post("http://68.183.222.133:5000/clients/new",Ce,{headers:{Authorization:JSON.parse(Object(i.c)())}}).then((function(e){console.log("---obj--");var t=[],a=0;de.map((function(e){t.push(e.idProd),a+=e.qte*e.price}));var c={clientId:e.data.result._id,idUser:we(JSON.parse(Object(i.c)())).id,idsProducts:t,total:a,status:me,note:ae,history:de};console.log(c),o.a.post("http://68.183.222.133:5000/orders/new",c,{headers:{Authorization:JSON.parse(Object(i.c)())}}).then((function(e){var t="http://68.183.222.133:5000/preorders/change-status/".concat(H);console.log(t),o.a.put(t,{},{headers:{Authorization:JSON.parse(Object(i.c)())}}).then((function(e){console.log("---status--"),console.log(e.data)})),console.log("---order--"),console.log(e.data),Q(!0)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})),children:"Sauvegarder"})]})}),Object(D.jsx)(O.a,{className:"invoice-action-wrapper",children:Object(D.jsxs)(h.a,{children:[Object(D.jsx)("h6",{className:"mb-2",children:"Status"}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status1",name:"status",label:"Confirm\xe9e",className:"custom-control-success",value:"Confirm\xe9e",defaultChecked:"Confirm\xe9e"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status2",name:"status",label:"Sans r\xe9ponse",className:"custom-control-danger",value:"SansR\xe9ponse",defaultChecked:"Sans r\xe9ponse"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status3",name:"status",label:"Report\xe9e",className:"custom-control-primary",value:"Report\xe9e",defaultChecked:"Report\xe9e"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status7",name:"status",label:"Injoignable",className:"custom-control-secondary",value:"Injoignable",defaultChecked:"Injoignable"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status4",name:"status",label:"Refus\xe9e",className:"custom-control-warning",value:"Refus\xe9e",defaultChecked:"Refus\xe9e"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status5",name:"status",label:"Annul\xe9e",className:"custom-control-danger",value:"Annul\xe9e",defaultChecked:"Annul\xe9e"===me,onChange:function(e){return Oe(e.target.value)}})}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{type:"radio",id:"status6",name:"status",label:"Livr\xe9e",className:"custom-control-success",value:"Livr\xe9e",defaultChecked:"Livr\xe9e"===me,onChange:function(e){return Oe(e.target.value)}})})]})})]})})]})]})};a(921),a(922),t.default=function(e){var t=Object(n.i)().id,a=e.location.state.order,r=Object(s.useState)(null),j=Object(c.a)(r,2),b=(j[0],j[1],Object(s.useState)(null)),u=Object(c.a)(b,2),m=(u[0],u[1]),O=Object(s.useState)(!1),h=Object(c.a)(O,2),p=(h[0],h[1],Object(s.useState)(!1)),x=Object(c.a)(p,2);x[0],x[1];return Object(s.useEffect)((function(){console.log("order"),console.log(a),o.a.get("http://68.183.222.133:5000/products/",{headers:{Authorization:JSON.parse(Object(i.c)())}}).then((function(e){console.log("____prds___"),console.log(e.data),m(e.data)}))}),[]),null!==a&&void 0!==a?Object(D.jsx)(E,{data:a}):Object(D.jsxs)(d.a,{color:"danger",children:[Object(D.jsx)("h4",{className:"alert-heading",children:"Invoice not found"}),Object(D.jsxs)("div",{className:"alert-body",children:["Invoice with id: ",t," doesn't exist. Check list of all invoices: ",Object(D.jsx)(l.b,{to:"/invoice/list",children:"Invoice List"})]})]})}},481:function(e,t,a){},510:function(e,t,a){"use strict";var c=a(1),s=a(32),n=a(122),l=a(939),i=a(58),r=a.n(i),o=a(514),d=a(531),j=a(509),b=a(6),u=["width","open","toggleSidebar","size","bodyClassName","contentClassName","wrapperClassName","headerClassName","className","title","children","closeBtn"];t.a=function(e){var t,a=e.width,i=e.open,m=e.toggleSidebar,O=e.size,h=e.bodyClassName,p=e.contentClassName,x=e.wrapperClassName,g=e.headerClassName,f=e.className,v=e.title,N=e.children,y=e.closeBtn,C=Object(n.a)(e,u),S=y||Object(b.jsx)(l.a,{className:"cursor-pointer",size:15,onClick:m});return Object(b.jsxs)(o.a,Object(c.a)(Object(c.a)(Object(c.a)({isOpen:i,toggle:m,contentClassName:r()(Object(s.a)({},p,p)),modalClassName:r()("modal-slide-in",Object(s.a)({},x,x)),className:r()((t={},Object(s.a)(t,f,f),Object(s.a)(t,"sidebar-lg","lg"===O),Object(s.a)(t,"sidebar-sm","sm"===O),t))},void 0!==a?{style:{width:String(a)+"px"}}:{}),C),{},{children:[Object(b.jsx)(d.a,{className:r()(Object(s.a)({},g,g)),toggle:m,close:S,tag:"div",children:Object(b.jsx)("h5",{className:"modal-title",children:Object(b.jsx)("span",{className:"align-middle",children:v})})}),Object(b.jsx)(j.a,{className:r()("flex-grow-1",Object(s.a)({},h,h)),children:N})]}))}},522:function(e,t,a){},556:function(e,t,a){"use strict";var c=a(1),s=a(122),n=a(6),l=["count","tag","component","children"],i=function(e){for(var t=e.count,a=e.tag,i=(e.component,e.children),r=Object(s.a)(e,l),o=a,d=[],j=0;j<t;j++)d.push(i(j));return Object(n.jsx)(o,Object(c.a)(Object(c.a)({},r),{},{children:d}))};i.defaultProps={tag:"div"},t.a=i},921:function(e,t,a){"use strict";a(510),a(1053),a(489),a(940),a(482),a(966),a(971),a(462),a(6)},922:function(e,t,a){"use strict";a(16),a(0),a(484),a(489),a(940),a(966),a(482),a(462),a(510),a(481),a(522),a(6)}}]);
//# sourceMappingURL=126.d22c1885.chunk.js.map